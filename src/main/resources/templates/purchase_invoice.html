<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>Purchase Invoices</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
  <style>
    body {
      background-color: #f4f6f9;
      font-family: 'Segoe UI', sans-serif;
    }
    .navbar {
      background-color: #2c3e50;
      padding: 10px 20px;
      color: white;
    }
    .sidebar {
      width: 250px;
      background-color: #34495e;
      height: 100vh;
      position: fixed;
      top: 56px;
      left: 0;
      padding-top: 20px;
    }
    .sidebar a {
      display: block;
      color: white;
      padding: 12px 24px;
      text-decoration: none;
    }
    .main-content {
      margin-left: 250px;
      margin-top: 56px;
      padding: 30px;
    }
  </style>
</head>
<body>

<nav class="navbar navbar-dark fixed-top">
  <div class="container-fluid d-flex justify-content-between">
    <span class="navbar-brand">Admin Panel</span>
    <a href="/logout" class="text-white"><i class="fas fa-sign-out-alt"></i> Logout</a>
  </div>
</nav>

<div class="sidebar">
	<a href="/clientvendor/admin"><i class="fas fa-chart-line me-2"></i> Dashboard</a>
  <a href="/clientvendor/vendorlist"><i class="fas fa-users me-2"></i> Vendors</a>
  <a href="/clientvendor/productlist"><i class="fas fa-boxes me-2"></i> Products</a>
  <a href="/clientproduct/purchase"><i class="fas fa-plus me-2"></i> Add Product</a>
  <a href="/clientvendor/addvendor"><i class="fas fa-user-plus me-2"></i> Add Vendor</a>
  <a href="/client/purchase-invoices"><i class="fas fa-file-invoice me-2"></i> Invoices</a>
</div>

<div class="main-content">
  <h2>Purchase Invoices</h2>

  <!-- Search -->
  <form th:action="@{/client/purchase-invoices}" method="get" class="d-flex gap-2 mb-3">
    <input type="text" name="search" class="form-control" placeholder="Search by Vendor Name or Invoice ID" th:value="${search}">
    <button type="submit" class="btn btn-primary">Search</button>
    <a href="/client/purchase-invoices" class="btn btn-secondary">Reset</a>
  </form>

  <!-- Invoice Table -->
  <table class="table table-bordered table-striped">
    <thead class="table-dark">
      <tr>
        <th>Invoice ID</th>
        <th>Vendor</th>
        <th>Product</th>
        <th>Quantity</th>
        <th>Unit Price</th>
        <th>Total Cost</th>
        <th>Date</th>
      </tr>
    </thead>
    <tbody>
      <tr th:each="inv : ${invoices}">
        <td th:text="${inv.id}">1</td>
        <td th:text="${inv.vendor.vendorname}">Vendor</td>
		<td th:text="${inv.vendor.product.productname}">Vendor</td>
        <td th:text="${inv.vendor.product.quantity}"></td>
        <td th:text="${inv.price}"></td>
        <td th:text="${inv.totalCost}"></td>
        <td th:text="${inv.date}"></td>
      </tr>
      <tr th:if="${#lists.isEmpty(invoices)}">
        <td colspan="7" class="text-center">No invoices found</td>
      </tr>
    </tbody>
  </table>

  <!-- Add Invoice -->
  <h4 class="mt-4">Add New Invoice</h4>
  <form th:action="@{/client/invoice/save}" th:object="${purchaseInvoice}" method="post">
	<div class="mb-3">
	  <label for="vendorId" class="form-label">Select Vendor</label>
	  <select class="form-select" id="vendorId" name="vendorId" required>
	    <option value="" disabled selected>Select a vendor</option>
	    <option th:each="vendor : ${vendors}" 
	            th:value="${vendor.vendorid}" 
	            th:text="${vendor.vendorname}">
	    </option>
	  </select>
	</div>

    <div class="mb-3">
      <label for="quantity" class="form-label">Quantity</label>
      <input type="number" class="form-control" th:field="*{quantity}" id="quantity" placeholder="Enter Quantity" required>
    </div>
    <button type="submit" class="btn btn-success">Save Invoice</button>
  </form>
</div>

</body>
</html>
